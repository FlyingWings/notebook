# MYSQL

## 基础结构
### 模块
MYSQL由多个功能块组成
- 服务器初始化模块
- 连接模块
- 线程模块
- 处理器模块
- 优化器模块
- etc...

### 客户端请求
- 查询语句：需要处理器参与
- 命令：不需要处理器参与，直接运行

### 执行流程
1. `初始化模块`开始工作，处理配置文件与命令行参数，分配内存与全局变量
2. `连接管理器`，监听来自客户端的连接；当来自客户端的连接到来时，`连接管理器`通过网络协议连接，并将控制权转移给`线程管理器`
3. `线程管理器`调用一个线程来处理连接，这一线程可能来自于线程缓存，或者新建一个连接线程
4. `用户授权模块`进行鉴权，通过后开始处理客户端请求
5. `命令分发器`接受客户端请求，如果是一般的命令，则直接执行；若为语句，则转发给`处理器`模块
6. 这一过程中，当开启语句日志时，`命令分发器`将请求`日志模块`记录所有的客户端请求（即使是不合法的）
7. `命令分发器`通过`语句缓存模块`，将查询语句转发给`处理器`
8. `语句缓存模块`检查该查询语句的处理结果是否被缓存；若被缓存则直接返回上次的结果；若无，则转发给`处理器`
9. 根据语句类型，`处理器`将调用不同的模块来处理
    - 查询语句：`查询优化器`
    - 更新，插入，删除，对表本身的操作（修改，删除等）：`表修改模块`
    - 检查，修复，更新，整理表等操作：`表维护模块`
    - 状态报告相关的操作：`状态报告模块`
    - 与替换相关的操作：`替换模块`
10. 对于以上模块，调用`访问控制模块`来获取指定表的访问权限
11. 当成功时，调用`表管理模块`，来打开表并获取必要的锁（表锁，行锁等）
12. 以上模块，通过`抽象存储引擎模块`执行实际的操作，如增删改查等
## 配置

## 基本指令

- DESC

- EXPLAIN

- SHOW VARIABLES 

## EXPLAIN分析

- type优先级
    - system
    - const
    - eq_ref
    - ref
    - fulltext
    - ref_or_null
    - index_merge
    - unique_subquery
    - index_subquery
    - range
    - index
    - ALL
